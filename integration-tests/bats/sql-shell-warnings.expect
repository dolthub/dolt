#!/usr/bin/expect

set timeout 5
spawn dolt sql

expect {
    -re "\rdolt-repo-[0-9]+/main\*> " { send "select 1/0;\r"; }
    timeout { exit 1; }
    failed { exit 1; }
}

expect {
    -re "\rdolt-repo-[0-9]+/main\*> " { send "show warnings;\r"; }
    timeout { exit 1; }
    failed { exit 1; }
}

expect {
    -re "\rdolt-repo-[0-9]+/main\*> " { send "exit;\r"; }
    timeout { exit 1; }
    failed { exit 1; }
}

expect eof
exit